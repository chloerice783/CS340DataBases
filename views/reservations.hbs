<!DOCTYPE html>
<html lang="en">
<head>
<title>Manage Reservations</title>
</head>

<link rel="stylesheet" href="index.css">

    <body>
        <header>
            <h1>Manage Reservations</h1>
            {{> navbar}}
        </header>

        <div class="table-buttons">
                <button type='button' class="table_button" id="add_button">Add reservation</button>
        </div>

        <table class="reservations-table">
        <tr>
            <th>Reservation ID</th>
            <th>Customer ID</th>
            <th>Cat ID</th>
            <th>Date</th>
            <th>Duration mins</th>
            <th>Guest count</th>
            <th>Actions</th>
        </tr>
        {{#each reservations}}
        <tr>
            <td>{{this.reservationId}}</td>
            <td>{{this.customerId}}</td>
            <td>{{this.catId}}</td>
            <td>{{this.date}}</td>
            <td>{{this.durationMinutes}}</td>
            <td>{{this.guestCount}}</td>
            <td>
                <div class="update-delete-section">
                    <!-- Update Form -->
                    <form action="/reservations/update/{{this.reservationId}}" method="POST" >
                        <input type="number" name="customerId" value="{{this.customerId}}" required>
                        <input type="number" name="catId" value="{{this.catId}}" required>
                        <input type="datetime-local" name="date" value="{{this.date}}" required>
                        <input type="number" name="durationMinutes" value="{{this.durationMinutes}}" required>
                        <input type="number" name="guestCount" value="{{this.guestCount}}" required>
                        <button type="submit" class="table_button" >Update</button>
                    </form>
                    
                    <!-- Delete Button -->
                    <form action="/customers/delete/{{this.catId}}" method="POST">
                        <button type="submit" class="table_button" >Delete</button>
                    </form>
                </div>
            </td>
        </tr>
        {{/each}}
        </table>


        <div class="entity-modal-overlay hidden" id="create-overlay">
            <div class="entity-modal">
                <button type="button" id="modal-close" class="modal-hide-button">&times;</button>
                <h3>Create a new reservation</h3>
                <form action="/reservations/add" method="POST" class="entity-attribute-selection">
                    <div class="attribute-field">
                        <label for='customerId'>Customer ID:</label>
                        <input type='number' id='customerId' name='customerId' value="{{this.customerId}}" required>
                    </div>

                    <div class="attribute-field">
                        <label for='catId'>Cat ID:</label>
                        <input type='number' id='catId' name='catId'  value="{{this.catId}}" required>
                    </div>

                    <div class="attribute-field">
                        <label for='date'>Reservation Date:</label>
                        <input type='datetime-local' id='date' name='date' value="{{this.date}}"  required>
                    </div>

                    <div class="attribute-field">
                        <label for='durationMinutes'>Duration (in minutes):</label>
                        <input type='number' id='durationMinutes' name='durationMinutes' value="{{this.durationMinutes}}"  required>
                    </div>

                    <div class="attribute-field">
                        <label for='guestCount'>Guest Count:</label>
                        <input type='number' id='guestCount' name='guestCount' value="{{this.guestCount}}"  required>
                    </div>

                    <button type='submit' class="submit_button">Add Reservation</button>
                </form>
            </div>
        </div>


        <script src="index.js"></script>
    </body>
</html>